{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/components/MapView.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport { Zone } from '../hooks/useZones';\r\nimport { LiveLocation } from '../types';\r\n\r\n// --- CONFIGURATION ---\r\nmapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_TOKEN || 'pk.eyJ1IjoibmlraGlsMjEwMjA2IiwiYSI6ImNta2U0NG0zdTAzMzUzZXMwZjZwbXFzZ3kifQ.fgjpDhGp_9bUapwaLEvtsg';\r\n\r\n// Mock Patrol Routes (Lines)\r\nconst PATROL_ROUTES = [\r\n  {\r\n    id: 'route-alpha',\r\n    coordinates: [\r\n      [79.1559, 12.9692],\r\n      [79.1580, 12.9720],\r\n      [79.1620, 12.9750],\r\n      [79.1500, 12.9700]\r\n    ]\r\n  }\r\n];\r\n\r\n// Helper: Calculate distance to check Red Zone interesection (Simple Haversine or Euclidean for small areas)\r\nfunction getDistanceFromLatLonInKm(lat1: number, lon1: number, lat2: number, lon2: number) {\r\n  const R = 6371; // Radius of the earth in km\r\n  const dLat = deg2rad(lat2 - lat1);\r\n  const dLon = deg2rad(lon2 - lon1);\r\n  const a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *\r\n    Math.sin(dLon / 2) * Math.sin(dLon / 2)\r\n    ;\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  const d = R * c; // Distance in km\r\n  return d;\r\n}\r\n\r\nfunction deg2rad(deg: number) {\r\n  return deg * (Math.PI / 180);\r\n}\r\n\r\ninterface MapViewProps {\r\n  zones?: Zone[];\r\n  locations?: LiveLocation[];\r\n  showPatrolRoutes?: boolean;\r\n}\r\n\r\nexport const MapView: React.FC<MapViewProps> = ({\r\n  zones = [],\r\n  locations = [],\r\n  showPatrolRoutes = false\r\n}) => {\r\n  const mapContainer = useRef<HTMLDivElement>(null);\r\n  const map = useRef<mapboxgl.Map | null>(null);\r\n  const markersRef = useRef<mapboxgl.Marker[]>([]);\r\n\r\n  // Initialize Map\r\n  useEffect(() => {\r\n    if (map.current || !mapContainer.current) return;\r\n\r\n    map.current = new mapboxgl.Map({\r\n      container: mapContainer.current,\r\n      style: 'mapbox://styles/mapbox/dark-v11',\r\n      center: [79.1559, 12.9692], // VIT Vellore\r\n      zoom: 14,\r\n      pitch: 45,\r\n      attributionControl: false\r\n    });\r\n\r\n    map.current.on('load', () => {\r\n      // Initialize Sources\r\n      map.current?.addSource('zones', {\r\n        type: 'geojson',\r\n        data: { type: 'FeatureCollection', features: [] }\r\n      });\r\n\r\n      map.current?.addSource('patrols', {\r\n        type: 'geojson',\r\n        data: { type: 'FeatureCollection', features: [] }\r\n      });\r\n\r\n      // --- 1. PATROL LINES ---\r\n      // Dashed Neon Lines\r\n      map.current?.addLayer({\r\n        id: 'patrol-lines',\r\n        type: 'line',\r\n        source: 'patrols',\r\n        layout: {\r\n          'line-join': 'round',\r\n          'line-cap': 'round'\r\n        },\r\n        paint: {\r\n          'line-color': '#00F0FF', // Cyan\r\n          'line-width': 3,\r\n          'line-dasharray': [2, 2],\r\n          'line-opacity': 0.7\r\n        }\r\n      });\r\n\r\n      // Glow for Patrol Lines\r\n      map.current?.addLayer({\r\n        id: 'patrol-lines-glow',\r\n        type: 'line',\r\n        source: 'patrols',\r\n        layout: {\r\n          'line-join': 'round',\r\n          'line-cap': 'round'\r\n        },\r\n        paint: {\r\n          'line-color': '#00F0FF',\r\n          'line-width': 8,\r\n          'line-blur': 4,\r\n          'line-opacity': 0.3\r\n        }\r\n      });\r\n\r\n      // --- 2. ZONES (BEACON STYLE) ---\r\n      // Red Zones Glow\r\n      map.current?.addLayer({\r\n        id: 'zones-glow-high',\r\n        type: 'circle',\r\n        source: 'zones',\r\n        filter: ['==', ['get', 'severity'], 'HIGH'],\r\n        paint: {\r\n          'circle-radius': ['get', 'radius_px'], // Dynamic radius? Or mock large\r\n          'circle-color': '#FF4D4D',\r\n          'circle-opacity': 0.15,\r\n          'circle-blur': 0.8\r\n        }\r\n      });\r\n\r\n      // Red Zones Core\r\n      map.current?.addLayer({\r\n        id: 'zones-core-high',\r\n        type: 'circle',\r\n        source: 'zones',\r\n        filter: ['==', ['get', 'severity'], 'HIGH'],\r\n        paint: {\r\n          'circle-radius': 4,\r\n          'circle-color': '#FFFFFF',\r\n          'circle-stroke-color': '#FF4D4D',\r\n          'circle-stroke-width': 3\r\n        }\r\n      });\r\n\r\n      // Moderate Zones Glow (Yellow)\r\n      map.current?.addLayer({\r\n        id: 'zones-glow-mod',\r\n        type: 'circle',\r\n        source: 'zones',\r\n        filter: ['==', ['get', 'severity'], 'MODERATE'],\r\n        paint: {\r\n          'circle-radius': 60,\r\n          'circle-color': '#FFD700',\r\n          'circle-opacity': 0.15,\r\n          'circle-blur': 0.8\r\n        }\r\n      });\r\n\r\n      map.current?.addLayer({\r\n        id: 'zones-core-mod',\r\n        type: 'circle',\r\n        source: 'zones',\r\n        filter: ['==', ['get', 'severity'], 'MODERATE'],\r\n        paint: {\r\n          'circle-radius': 4,\r\n          'circle-color': '#FFFFFF',\r\n          'circle-stroke-color': '#FFD700',\r\n          'circle-stroke-width': 3\r\n        }\r\n      });\r\n    });\r\n\r\n    return () => {\r\n      map.current?.remove();\r\n      map.current = null;\r\n    }\r\n  }, []);\r\n\r\n  // Update Data Sources\r\n  useEffect(() => {\r\n    if (!map.current || !map.current.isStyleLoaded()) return;\r\n\r\n    // 1. Zones\r\n    const zoneFeatures = zones.map(zone => ({\r\n      type: 'Feature',\r\n      geometry: { type: 'Point', coordinates: [zone.lng, zone.lat] },\r\n      properties: {\r\n        severity: zone.severity,\r\n        radius_px: (zone.radius || 200) / 2 // Rough pixel mapping for visual glow\r\n      }\r\n    }));\r\n\r\n    (map.current.getSource('zones') as mapboxgl.GeoJSONSource)?.setData({\r\n      type: 'FeatureCollection',\r\n      features: zoneFeatures as any\r\n    });\r\n\r\n    // 2. Patrol Routes\r\n    const patrolFeatures = showPatrolRoutes ? PATROL_ROUTES.map(route => ({\r\n      type: 'Feature',\r\n      geometry: { type: 'LineString', coordinates: route.coordinates },\r\n      properties: {}\r\n    })) : [];\r\n\r\n    (map.current.getSource('patrols') as mapboxgl.GeoJSONSource)?.setData({\r\n      type: 'FeatureCollection',\r\n      features: patrolFeatures as any\r\n    });\r\n\r\n  }, [zones, showPatrolRoutes]);\r\n\r\n  // Update User Markers (Beacons)\r\n  useEffect(() => {\r\n    if (!map.current) return;\r\n\r\n    // Clear existing\r\n    markersRef.current.forEach(m => m.remove());\r\n    markersRef.current = [];\r\n\r\n    locations.forEach(user => {\r\n      // Check Red Zone Intersection\r\n      // Simple logic: if user is within X meters of any HIGH severity zone\r\n      let inRedZone = false;\r\n      zones.forEach(z => {\r\n        if (z.severity === 'HIGH') {\r\n          const dist = getDistanceFromLatLonInKm(user.latitude, user.longitude, z.lat, z.lng);\r\n          // Assuming radius is ~200m (0.2km)\r\n          if (dist < 0.2) inRedZone = true;\r\n        }\r\n      });\r\n\r\n      const el = document.createElement('div');\r\n\r\n      // Google Maps Style Directional Beacon\r\n      // If heading exists, rotate an arrow/cone in that direction\r\n      // If not, just a pulsing dot\r\n\r\n      const width = inRedZone ? '24px' : '16px';\r\n      const height = inRedZone ? '24px' : '16px';\r\n      const color = inRedZone ? '#FF4D4D' : '#3B82F6';\r\n\r\n      // Base styles\r\n      el.style.width = width;\r\n      el.style.height = height;\r\n      el.style.borderRadius = '50%';\r\n      el.style.backgroundColor = color;\r\n      el.style.border = '2px solid white';\r\n      el.style.boxShadow = `0 0 15px ${color}`;\r\n      el.style.transition = 'all 0.3s ease';\r\n\r\n      if (inRedZone) {\r\n        el.className = 'marker-danger'; // Uses the global CSS pulse\r\n      } else {\r\n        el.className = 'marker-safe';\r\n      }\r\n\r\n      // Add direction indicator if heading is present\r\n      if (user.heading !== null && user.heading !== undefined) {\r\n        const arrow = document.createElement('div');\r\n        arrow.style.position = 'absolute';\r\n        arrow.style.top = '50%';\r\n        arrow.style.left = '50%';\r\n        arrow.style.width = '0';\r\n        arrow.style.height = '0';\r\n        arrow.style.borderLeft = '6px solid transparent';\r\n        arrow.style.borderRight = '6px solid transparent';\r\n        arrow.style.borderBottom = `10px solid white`; // White arrow\r\n        arrow.style.transform = `translate(-50%, -50%) rotate(${user.heading}deg) translateY(-12px)`; // Offset to point out\r\n        arrow.style.transformOrigin = 'center bottom';\r\n        el.appendChild(arrow);\r\n      }\r\n\r\n      const marker = new mapboxgl.Marker({ element: el })\r\n        .setLngLat([user.longitude, user.latitude])\r\n        .setPopup(new mapboxgl.Popup({ offset: 25, className: 'neo-glass text-black' }).setHTML(`\r\n          <div style=\"color:black; font-weight:bold;\">Unit: ${user.user_id}</div>\r\n          <div style=\"color:#555;\">Status: ${inRedZone ? 'DANGER' : 'Patrolling'}</div>\r\n        `))\r\n        .addTo(map.current!);\r\n\r\n      markersRef.current.push(marker);\r\n    });\r\n\r\n  }, [locations, zones]);\r\n\r\n  return <div ref={mapContainer} style={{ width: '100%', height: '100%' }} />;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/hooks/useZones.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\nexport interface Zone {\r\n    id: number;\r\n    location: string;\r\n    lat: number;\r\n    lng: number;\r\n    severity: 'HIGH' | 'MODERATE' | 'LOW';\r\n    type: string;\r\n    description: string;\r\n    active_hours?: string;\r\n    radius?: number; // Optional, defaults will be applied\r\n}\r\n\r\nexport const useZones = () => {\r\n    const [zones, setZones] = useState<Zone[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchZones = async () => {\r\n        try {\r\n            const response = await fetch('http://localhost:8000/zones');\r\n            if (!response.ok) {\r\n                throw new Error('Failed to fetch zones');\r\n            }\r\n            const data = await response.json();\r\n            // Expecting data format: { zones: [...] }\r\n            setZones(data.zones || []);\r\n            setError(null);\r\n        } catch (err) {\r\n            console.error('Error fetching zones:', err);\r\n            setError('Failed to load risk zones');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchZones();\r\n        // Poll every 60 seconds for zone updates (e.g. time-based activation)\r\n        const interval = setInterval(fetchZones, 60000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    return { zones, loading, error };\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;;AAcO,MAAM,WAAW;;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,MAAM,aAAa;QACf,IAAI;YACA,MAAM,WAAW,MAAM,MAAM;YAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;gBACd,MAAM,IAAI,MAAM;YACpB;YACA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,0CAA0C;YAC1C,SAAS,KAAK,KAAK,IAAI,EAAE;YACzB,SAAS;QACb,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,yBAAyB;YACvC,SAAS;QACb,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,0KAAS;8BAAC;YACN;YACA,sEAAsE;YACtE,MAAM,WAAW,YAAY,YAAY;YACzC;sCAAO,IAAM,cAAc;;QAC/B;6BAAG,EAAE;IAEL,OAAO;QAAE;QAAO;QAAS;IAAM;AACnC;GA/Ba"}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/hooks/useRealtimeLocations.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport type { SupabaseClient } from \"@supabase/supabase-js\";\r\nimport type { LiveLocation } from \"../types\";\r\n\r\nconst mockLocations: LiveLocation[] = [\r\n  { user_id: \"user-101\", latitude: 12.9696, longitude: 79.1589, heading: 185, speed: 1.1, updated_at: new Date().toISOString() },\r\n  { user_id: \"user-102\", latitude: 12.9724, longitude: 79.1551, heading: 42, speed: 0.6, updated_at: new Date().toISOString() },\r\n];\r\n\r\nconst normalizeLocation = (row: any): LiveLocation => ({\r\n  user_id: row.user_id ?? row.id ?? \"unknown\",\r\n  latitude: Number(row.latitude ?? row.lat ?? 0),\r\n  longitude: Number(row.longitude ?? row.lng ?? 0),\r\n  heading: row.heading ?? row.bearing ?? null,\r\n  speed: row.speed ?? null,\r\n  updated_at: row.updated_at ?? row.timestamp ?? new Date().toISOString(),\r\n  source_type: row.source_type ?? 'online', // Default to online\r\n  mesh_hop_count: row.mesh_hop_count ?? 0\r\n});\r\n\r\nexport const useRealtimeLocations = (supabase: SupabaseClient | null, pollingInterval?: number) => {\r\n  const [locations, setLocations] = useState<LiveLocation[]>(mockLocations);\r\n\r\n  useEffect(() => {\r\n    if (!supabase) return;\r\n\r\n    const fetchLocations = async () => {\r\n      const { data, error } = await supabase\r\n        .from(\"live_locations\")\r\n        .select(\"user_id,latitude,longitude,heading,speed,updated_at,source_type,mesh_hop_count\");\r\n\r\n      if (error) {\r\n        console.warn(\"live_locations fetch error\", error.message);\r\n        return;\r\n      }\r\n      if (data) setLocations(data.map(normalizeLocation));\r\n    };\r\n\r\n    // Initial fetch\r\n    fetchLocations();\r\n\r\n    let intervalId: NodeJS.Timeout | null = null;\r\n    let channel: any = null;\r\n\r\n    if (pollingInterval && pollingInterval > 0) {\r\n      // POLLING MODE (Adaptive Refresh)\r\n      intervalId = setInterval(fetchLocations, pollingInterval);\r\n    } else {\r\n      // REALTIME SUBSCRIPTION MODE (Default)\r\n      channel = supabase\r\n        .channel(\"live-locations-stream\")\r\n        .on(\r\n          \"postgres_changes\",\r\n          { event: \"*\", schema: \"public\", table: \"live_locations\" },\r\n          (payload) => {\r\n            setLocations((prev) => {\r\n              if (payload.eventType === \"DELETE\") {\r\n                const removedId = payload.old?.user_id ?? payload.old?.id;\r\n                return prev.filter((l) => l.user_id !== removedId);\r\n              }\r\n              const updated = normalizeLocation(payload.new);\r\n              const existing = prev.find((l) => l.user_id === updated.user_id);\r\n              if (existing) {\r\n                return prev.map((l) => (l.user_id === updated.user_id ? updated : l));\r\n              }\r\n              return [updated, ...prev];\r\n            });\r\n          }\r\n        )\r\n        .subscribe();\r\n    }\r\n\r\n    return () => {\r\n      if (intervalId) clearInterval(intervalId);\r\n      if (channel) supabase.removeChannel(channel);\r\n    };\r\n  }, [supabase, pollingInterval]);\r\n\r\n  return { locations };\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAMA,MAAM,gBAAgC;IACpC;QAAE,SAAS;QAAY,UAAU;QAAS,WAAW;QAAS,SAAS;QAAK,OAAO;QAAK,YAAY,IAAI,OAAO,WAAW;IAAG;IAC7H;QAAE,SAAS;QAAY,UAAU;QAAS,WAAW;QAAS,SAAS;QAAI,OAAO;QAAK,YAAY,IAAI,OAAO,WAAW;IAAG;CAC7H;AAED,MAAM,oBAAoB,CAAC,MAA2B,CAAC;QACrD,SAAS,IAAI,OAAO,IAAI,IAAI,EAAE,IAAI;QAClC,UAAU,OAAO,IAAI,QAAQ,IAAI,IAAI,GAAG,IAAI;QAC5C,WAAW,OAAO,IAAI,SAAS,IAAI,IAAI,GAAG,IAAI;QAC9C,SAAS,IAAI,OAAO,IAAI,IAAI,OAAO,IAAI;QACvC,OAAO,IAAI,KAAK,IAAI;QACpB,YAAY,IAAI,UAAU,IAAI,IAAI,SAAS,IAAI,IAAI,OAAO,WAAW;QACrE,aAAa,IAAI,WAAW,IAAI;QAChC,gBAAgB,IAAI,cAAc,IAAI;IACxC,CAAC;AAEM,MAAM,uBAAuB,CAAC,UAAiC;;IACpE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAiB;IAE3D,IAAA,0KAAS;0CAAC;YACR,IAAI,CAAC,UAAU;YAEf,MAAM;iEAAiB;oBACrB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,kBACL,MAAM,CAAC;oBAEV,IAAI,OAAO;wBACT,QAAQ,IAAI,CAAC,8BAA8B,MAAM,OAAO;wBACxD;oBACF;oBACA,IAAI,MAAM,aAAa,KAAK,GAAG,CAAC;gBAClC;;YAEA,gBAAgB;YAChB;YAEA,IAAI,aAAoC;YACxC,IAAI,UAAe;YAEnB,IAAI,mBAAmB,kBAAkB,GAAG;gBAC1C,kCAAkC;gBAClC,aAAa,YAAY,gBAAgB;YAC3C,OAAO;gBACL,uCAAuC;gBACvC,UAAU,SACP,OAAO,CAAC,yBACR,EAAE,CACD,oBACA;oBAAE,OAAO;oBAAK,QAAQ;oBAAU,OAAO;gBAAiB;sDACxD,CAAC;wBACC;8DAAa,CAAC;gCACZ,IAAI,QAAQ,SAAS,KAAK,UAAU;oCAClC,MAAM,YAAY,QAAQ,GAAG,EAAE,WAAW,QAAQ,GAAG,EAAE;oCACvD,OAAO,KAAK,MAAM;0EAAC,CAAC,IAAM,EAAE,OAAO,KAAK;;gCAC1C;gCACA,MAAM,UAAU,kBAAkB,QAAQ,GAAG;gCAC7C,MAAM,WAAW,KAAK,IAAI;+EAAC,CAAC,IAAM,EAAE,OAAO,KAAK,QAAQ,OAAO;;gCAC/D,IAAI,UAAU;oCACZ,OAAO,KAAK,GAAG;0EAAC,CAAC,IAAO,EAAE,OAAO,KAAK,QAAQ,OAAO,GAAG,UAAU;;gCACpE;gCACA,OAAO;oCAAC;uCAAY;iCAAK;4BAC3B;;oBACF;qDAED,SAAS;YACd;YAEA;kDAAO;oBACL,IAAI,YAAY,cAAc;oBAC9B,IAAI,SAAS,SAAS,aAAa,CAAC;gBACtC;;QACF;yCAAG;QAAC;QAAU;KAAgB;IAE9B,OAAO;QAAE;IAAU;AACrB;GA3Da"}},
    {"offset": {"line": 537, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error('Supabase URL and anon key are required.')\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa"}},
    {"offset": {"line": 556, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACxB"}},
    {"offset": {"line": 574, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2\",\r\n        sm: \"h-8 rounded-md px-3 text-xs\",\r\n        lg: \"h-10 rounded-md px-8\",\r\n        icon: \"h-9 w-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n  VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,uOACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 641, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as AvatarPrimitives from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Avatar = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitives.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatar.displayName = AvatarPrimitives.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitives.Image>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitives.Image>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitives.Image\r\n    ref={ref}\r\n    className={cn(\"aspect-square h-full w-full\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAvatarImage.displayName = AvatarPrimitives.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitives.Fallback>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitives.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitives.Fallback\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitives.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,2KAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;;AAGb,OAAO,WAAW,GAAG,6KAAqB,CAAC,WAAW;AAEtD,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,+BAA+B;QAC5C,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAsB,CAAC,WAAW;AAE5D,MAAM,+BAAiB,2KAAgB,OAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,iLAAyB;QACxB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,wEACA;QAED,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG,iLAAyB,CAAC,WAAW"}},
    {"offset": {"line": 706, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitives from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n    \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n    React.ElementRef<typeof LabelPrimitives.Root>,\r\n    React.ComponentPropsWithoutRef<typeof LabelPrimitives.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n    <LabelPrimitives.Root\r\n        ref={ref}\r\n        className={cn(labelVariants(), className)}\r\n        {...props}\r\n    />\r\n))\r\nLabel.displayName = LabelPrimitives.Root.displayName\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,0KAAG,EACrB;AAGJ,MAAM,sBAAQ,2KAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC,4KAAoB;QACjB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGjB,MAAM,WAAW,GAAG,4KAAoB,CAAC,WAAW"}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,2KAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6KAAqB;QACpB,WAAW,IAAA,4HAAE,EACX,+XACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,6LAAC,8KAAsB;YACrB,WAAW,IAAA,4HAAE,EACX;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,6KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/src/components/TacticalDashboard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useId } from 'react';\r\nimport { MapView } from './MapView';\r\nimport { Map, Shield, Users, Eclipse as EclipseIcon, X as XIcon, UserRound as UserRoundIcon } from 'lucide-react';\r\nimport { useZones } from '../hooks/useZones';\r\nimport { useRealtimeLocations } from '../hooks/useRealtimeLocations';\r\nimport { supabase } from '../lib/supabaseClient';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\n\r\n// --- COMPONENTS ---\r\n\r\nconst NavButton = ({ icon, active, onClick }: { icon: React.ReactNode, active: boolean, onClick: () => void }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`w-full aspect-square rounded-xl flex items-center justify-center transition-all duration-300 ${active\r\n        ? 'bg-[#1A0505] text-[#FF4D4D] border border-[#FF4D4D]/30 shadow-[0_0_15px_rgba(255,77,77,0.15)]'\r\n        : 'text-[#444] hover:text-[#EDEDED] hover:bg-[#111]'\r\n      }`}\r\n  >\r\n    {icon}\r\n  </button>\r\n);\r\n\r\nfunction SystemBanner() {\r\n  const [isVisible, setIsVisible] = useState(true);\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div className=\"neo-glass px-4 py-3 text-white mb-4 rounded-xl pointer-events-auto\">\r\n      <div className=\"flex gap-2 items-center\">\r\n        <div className=\"flex grow gap-3 items-center\">\r\n          <EclipseIcon aria-hidden=\"true\" className=\"shrink-0 opacity-60 text-[#00F0FF]\" size={16} />\r\n          <div className=\"flex grow flex-col justify-between gap-1\">\r\n            <p className=\"text-sm font-medium\">System Online</p>\r\n            <p className=\"text-xs text-zinc-400\">All beacons operational.</p>\r\n          </div>\r\n        </div>\r\n        <Button\r\n          aria-label=\"Close banner\"\r\n          className=\"group -my-1.5 -me-2 size-8 shrink-0 p-0 hover:bg-white/5 text-white\"\r\n          onClick={() => setIsVisible(false)}\r\n          variant=\"ghost\"\r\n        >\r\n          <XIcon aria-hidden=\"true\" className=\"opacity-60 transition-opacity group-hover:opacity-100\" size={16} />\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ThemeToggle() {\r\n  const id = useId();\r\n  const [checked, setChecked] = useState<boolean>(true); // Default to Dark (On)\r\n\r\n  return (\r\n    <div className=\"inline-flex items-center gap-2 pointer-events-auto bg-[#0A0A0A] p-2 rounded-full border border-white/10\">\r\n      <Switch\r\n        aria-label=\"Toggle switch\"\r\n        checked={checked}\r\n        id={id}\r\n        onCheckedChange={setChecked}\r\n        className=\"data-[state=checked]:bg-[#FF4D4D]\"\r\n      />\r\n      <Label className=\"font-medium text-xs text-zinc-400 cursor-pointer\" htmlFor={id}>\r\n        {checked ? \"Dark Mode\" : \"Light Mode\"}\r\n      </Label>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UserProfile() {\r\n  return (\r\n    <Avatar className=\"h-10 w-10 border-2 border-[#FF4D4D]/20\">\r\n      <AvatarFallback className=\"bg-[#1A0505] text-[#FF4D4D]\">\r\n        <UserRoundIcon aria-hidden=\"true\" className=\"opacity-80\" size={20} />\r\n      </AvatarFallback>\r\n    </Avatar>\r\n  );\r\n}\r\n\r\n// --- MAIN DASHBOARD ---\r\n\r\nexport default function TacticalDashboard() {\r\n  const [activeTab, setActiveTab] = useState('map');\r\n\r\n  // Real Data Hooks\r\n  const { zones } = useZones();\r\n  const { locations } = useRealtimeLocations(supabase);\r\n\r\n  return (\r\n    // MASTER GRID: 90px Sidebar | Remaining Space for Map\r\n    <div className=\"h-screen w-screen grid grid-cols-[90px_1fr] bg-[#050505] overflow-hidden text-white font-sans\">\r\n\r\n      {/* COL 1: THE DOCK */}\r\n      <aside className=\"border-r border-[#222] bg-[#0A0A0A] flex flex-col items-center py-8 z-50 shadow-2xl justify-between h-full\">\r\n        <div className=\"flex flex-col items-center w-full gap-8\">\r\n          {/* Brand Beacon */}\r\n          <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-[#FF4D4D] to-[#990000] shadow-[0_0_30px_rgba(255,0,0,0.4)] flex items-center justify-center shrink-0\">\r\n            <span className=\"font-bold text-black text-xs\">CMD</span>\r\n          </div>\r\n\r\n          {/* Navigation Stack */}\r\n          <nav className=\"flex flex-col gap-6 w-full px-4\">\r\n            <NavButton icon={<Map size={24} />} active={activeTab === 'map'} onClick={() => setActiveTab('map')} />\r\n            <NavButton icon={<Shield size={24} />} active={activeTab === 'patrol'} onClick={() => setActiveTab('patrol')} />\r\n            <NavButton icon={<Users size={24} />} active={activeTab === 'users'} onClick={() => setActiveTab('users')} />\r\n          </nav>\r\n        </div>\r\n\r\n        {/* User Profile at Bottom */}\r\n        <div className=\"mb-4\">\r\n          <UserProfile />\r\n        </div>\r\n      </aside>\r\n\r\n      {/* COL 2: THE THEATER */}\r\n      <main className=\"relative h-full w-full\">\r\n        {/* LAYER A: The Map Engine (Absolute Fill) */}\r\n        <div className=\"absolute inset-0 z-0\">\r\n          <MapView\r\n            zones={zones}\r\n            locations={locations}\r\n            showPatrolRoutes={activeTab === 'patrol' || activeTab === 'map'}\r\n          />\r\n        </div>\r\n\r\n        {/* LAYER B: The HUD Overlay */}\r\n        <div className=\"absolute top-6 right-6 z-10 w-80 flex flex-col gap-4 pointer-events-none\">\r\n          <SystemBanner />\r\n\r\n          <div className=\"flex justify-end\">\r\n            <ThemeToggle />\r\n          </div>\r\n\r\n          {/* Simple Status Card */}\r\n          <div className=\"neo-glass p-4 rounded-xl flex items-center justify-between pointer-events-auto\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-2 h-2 rounded-full bg-[#00F0FF] animate-pulse\" />\r\n              <span className=\"text-xs font-mono text-[#00F0FF] tracking-widest\">SentraBeacon NET</span>\r\n            </div>\r\n            <span className=\"text-xs text-[#666] font-mono\">\r\n              {locations.length > 0 ? `${locations.length} ACTIVE` : 'SEARCHING...'}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1209, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nkk77/Desktop/SENTRA/WSF/web-dashboard/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport TacticalDashboard from \"../src/components/TacticalDashboard\";\r\n\r\nexport default function HomePage() {\r\n  return <TacticalDashboard />;\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKe,SAAS;IACtB,qBAAO,6LAAC,qJAAiB;;;;;AAC3B;KAFwB"}}]
}